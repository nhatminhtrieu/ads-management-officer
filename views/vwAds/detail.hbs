{{#section "js"}}
  <script type="module">
    import CustomMap from "/static/js/map/CustomMap.js"; 
	import { contentAd }
    from "/static/js/loadMarker.js"; 
	const HomeMap = new CustomMap();
    HomeMap.init().then(() => { 
		const contentString = contentAd({{{json location }}}); 
		HomeMap.pushAdMarker({{{json location}}}, {{{json location.address}}}, contentString); 
		HomeMap.setCenter({{{json location.coordinate }}}); 
	});
  </script>
  <script>
    window.onload = function () { 
		$.post(`/advertisement/manage/can-be-deleted/{{location._id}}`, function (data) { 
			if (data === true) { 
				$('#deleteButton').prop("disabled", false); 
			} 
		});
	} 
	$("#edit").click(function () { 
		console.log(true)
    	$('#typeBoard').prop("disabled", false); 
		$('#typeBoard').prop("required", true); 
		$('#number').prop("disabled", false); 
		$('#size').prop("disabled", false); 
		$('#file').prop("disabled", false);
    	$('#deleteButton').prop("hidden", false); 
		$('#edit').prop("hidden", true);
    	$('#fnButton').show(); 
	}); 
	$("#cancelButton").click(function () {
    	window.location.reload(); 
	}); 
	$("#deleteButton").click(function (e) {
    	e.preventDefault(); 
		$.post("/advertisement/manage/delete/{{location._id}}", function (response) { 
			window.location.href = '/advertisement/manage'; 
		}) 
	});
  </script>
{{/section}}

<a class="btn p-0 link-primary" href="/advertisement/manage" role="button">
  <i class="bi bi-caret-left"></i>
  Trở về
</a>

<div id="map" style="height: 400px; width: 100%;" class="mt-3"></div>

<div class="d-flex justify-content-between">
  <div class="mt-3" style="display: flex; align-items: center;">
    <h4>Thông tin chi tiết bảng quảng cáo </h4>
    <div id="edit" style="margin-left: 16px; cursor: pointer">
      <i class="bi bi-pencil-square"></i>
      Chỉnh sửa
    </div>
  </div>

  <div class="mt-3">
    <button
      type="button"
      class="btn btn-danger"
      id="deleteButton"
      hidden
      disabled
    >
      <i class="bi bi-trash"></i>
      Xóa
    </button>
  </div>
</div>

<form method="POST">
  <div class="form-outline mt-3">
    <label class="form-label" for="address">Địa chỉ</label>
    <input
      type="text"
      id="address"
      class="form-control border-2"
      value="{{location.address}}"
      disabled
    />
  </div>

  <div class="form-outline mt-3">
    <label class="form-label" for="type">Loại bảng quảng cáo</label>
    <input
      type="text"
      id="typeBoard"
      class="form-control border-2"
      name="typeBoard"
      value="{{ad.typeBoard}}"
      disabled
    />
  </div>
  <div class="form-outline mt-3">
    <div class="row g-3">
      <div class="col">
        <label class="form-label" for="number">Số lượng</label>
        <input
          type="text"
          id="number"
          class="form-control border-2"
          name="number"
          value="{{ad.number}}"
          disabled
        />
      </div>
      <div class="col">
        <label class="form-label" for="size">Kích thước</label>
        <input
          type="text"
          id="size"
          class="form-control border-2"
          name="size"
          value="{{ad.size}}"
          disabled
        />
      </div>
    </div>
  </div>
  <div class="form-outline mt-3">
    <label class="form-label" for="type">Hình ảnh bảng quảng cáo</label>
    <input
      type="file"
      id="file"
      class="form-control border-2"
      name="file"
      disabled
    />
    <div class="mt-3 row flex-nowrap overflow-auto">
      {{#each ad.imgs}}
        <div class="col-4" style="position: relative; height: 300px; ">
          <img
            src="{{this}}"
            style="width: 100%; height: 100%; object-fit: cover; border-radius: 0.375rem;"
          />
          <button
            type="button"
            class="btn btn-danger"
            id="deleteImgButton"
            style="position: absolute; top: 4%; right: 4%;"
            hidden
            disabled
          >
            <i class="bi bi-trash"></i>
          </button>
        </div>
      {{/each}}
    </div>
  </div>
  <div class="form-outline mt-3">
    <div class="row g-3">
      <div class="col">
        <label class="form-label" for="start">Ngày bắt đầu</label>
        <input
          type="text"
          id="start"
          class="form-control border-2"
          name="start"
          value="{{ad.start}}"
          disabled
        />
      </div>
      <div class="col">
        <label class="form-label" for="end">Ngày kết thúc</label>
        <input
          type="text"
          id="end"
          class="form-control border-2"
          name="end"
          value="{{ad.end}}"
          disabled
        />
      </div>
    </div>
  </div>

  <div id="fnButton" class="mt-3" style="display: none;">
    <a id="cancelButton" class="btn btn-secondary" role="button">
      Hủy
    </a>
    <button type="submit" class="btn btn-primary">
      <i class="bi bi-floppy"></i>
      Lưu
    </button>
  </div>
</form>